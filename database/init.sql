-- init.sql
CREATE TABLE USERS (
    id INT GENERATED BY DEFAULT AS IDENTITY 
        (START WITH 1000 INCREMENT BY 2) PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE BANK_ACCOUNTS (
    id INT GENERATED BY DEFAULT AS IDENTITY 
        (START WITH 1000 INCREMENT BY 2) PRIMARY KEY,
    account_name VARCHAR(255) NOT NULL,
    customer_id INT NOT NULL,
    balance_cents BIGINT DEFAULT 0 NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    notes VARCHAR(255),
    deleted BOOLEAN DEFAULT FALSE NOT NULL,
    currency VARCHAR(3) NOT NULL
);

CREATE TABLE FUND_TRANSFERS (
    id INT GENERATED BY DEFAULT AS IDENTITY 
        (START WITH 1000 INCREMENT BY 2) PRIMARY KEY,
    from_account INT REFERENCES BANK_ACCOUNTS(id),
    to_account INT REFERENCES BANK_ACCOUNTS(id),
    amount_cents BIGINT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    notes VARCHAR(255)
);